<!DOCTYPE html>
<html>
<head>
	<title>EaselJS demo: localToLocal</title>
	<link href="../_shared/demo.css" rel="stylesheet" type="text/css">
	<script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
	<script>
		var stage, arm, dragger;
		function init() {
			stage = new createjs.Stage("demoCanvas");
			for (var i = 0; i < 8; i++) {
				var child = new createjs.Shape();
				child.graphics.beginFill("red").drawCircle(0,0,45);
				child.x = i*100;
				child.y = 100;

				var target = new createjs.Shape();
				target.graphics.beginFill("blue").drawCircle(0,0,45);
				target.x = i*100;
				target.y = 400;

				stage.addChild(child);
				stage.addChild(target);

				var self = this;
			        (function(self) {
			            self.addEventListener('click', function() {
			                self.handleClick();
			            });
			        })(this);
			    (function(self) {
			    	
			    })    
				child.on("pressmove",function(evt) {
					evt.currentTarget.x = evt.stageX;
					evt.currentTarget.y = evt.stageY;

					var pt = child.localToLocal(10, 10, target);
					if (target.hitTest(pt.x, pt.y)) { 
						target.alpha = 1; 
						console.log('HUHU');
						child.setTransform(target.x, target.y);
					}
					stage.update(); 
				});
				
			}

			stage.update();
// getNumChildren y()
			
			// for (var i = 0; i < stage.getNumChildren(); i++) {
			// 	var child = stage.getChildAt(i);
			// }

		
			// dragger = new createjs.Container();
			// dragger.x = 40;
			// dragger.y = 100;
			// dragger.addChild(arm);
			// stage.addChild(dragger);

			// dragger.on("pressmove",function(evt) {
			// 	evt.currentTarget.x = evt.stageX;
			// 	evt.currentTarget.y = evt.stageY;
			// 	target.alpha = 0.5;
			// 	var pt = dragger.localToLocal(10, 10, target);
			// 	if (target.hitTest(pt.x, pt.y)) { 
			// 		target.alpha = 1; 
			// 		dragger.setTransform(target.x, target.y);
			// 	}
			// 	stage.update();  
			// });




			//stage.update();   
			
			// createjs.Ticker.on("tick", tick);
		}
		
		function tick(event) {
			stage.update(event);
		}
	</script>
</head>
<body onLoad="init();">
	<canvas id="demoCanvas" width="600" height="600">
		alternate content
	</canvas>
</body>
</html>